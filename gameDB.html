<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Games Database</title>

<style>
* {
  box-sizing: border-box;
  font-family: Arial, Helvetica, sans-serif;
}

@font-face {
  font-family: "BalatroFont";
  src: url("games.ttf") format("truetype");
}

body {
  margin: 0;
  background: #0e0e0e;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.app {
  width: 1024px;
  height: 768px;
  background: #121212;
  border-radius: 24px;
  border: 3px solid #2a2a2a;
  padding: 28px;
  display: flex;
}

/* LEFT PANEL */
.left-panel {
  width: 260px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.load-btn,
.buttons button {
  font-family: "BalatroFont", Arial, sans-serif;
}

.search {
  height: 40px;
  border: 3px solid #3a3a3a;
  border-radius: 6px;
  background: #1a1a1a;
  color: #eaeaea;
  padding: 0 10px;
  font-size: 15px;
}

.load-btn {
  height: 36px;
  margin-bottom: 6px;
  background: #1a1a1a;
  border: 3px solid #3a3a3a;
  border-radius: 6px;
  color: #ffffff;
  font-size: 14px;
  cursor: pointer;
}

.load-btn:hover {
  background: #232323;
}

.listbox {
  flex: 1;
  border: 3px solid #3a3a3a;
  border-radius: 6px;
  background: #1a1a1a;
  overflow-y: auto;
}

.list-item {
  padding: 10px;
  cursor: pointer;
  color: #e0e0e0;
  border-bottom: 1px solid #2a2a2a;
  font-family: "BalatroFont", Arial, sans-serif;
}

.list-item:hover,
.list-item.active {
  background: #232323;
}

.buttons {
  display: flex;
  gap: 12px;
}

.buttons button {
  flex: 1;
  height: 36px;
  background: #1a1a1a;
  border: 3px solid #3a3a3a;
  border-radius: 6px;
  color: #ffffff;
  font-size: 14px;
  cursor: pointer;
  text-transform: uppercase;
}

.buttons button:hover {
  background: #232323;
}

.divider {
  width: 2.5px;
  margin-left: 15px;
  margin-right: 15px;
  background: #3a3a3a;
  border-radius: 2px;
}

/* RIGHT PANEL */
.right-panel {
  flex: 1;
  padding-top: 4px;
}

.group + .group {
  margin-top: 20px;
}

.label {
  font-size: 26px;
  color: #ffffff;
  font-family: "BalatroFont", Arial, sans-serif;
  margin-bottom: 6px;
}

.value {
  font-size: 16pt;
  color: #e0e0e0;
  font-family: "BalatroFont", Arial, sans-serif;
}

.row {
  display: flex;
  gap: 20px;       /* smaller, consistent spacing */
  margin-top: 20px;
}

.column {
  flex: 1;         /* make both columns equal width */
}

.column .label {
  font-size: 26px;
  color: #ffffff;
  font-family: "BalatroFont", Arial, sans-serif;
  margin-bottom: 6px;
}

.column .value {
  font-size: 16pt;
  color: #e0e0e0;
  font-family: "BalatroFont", Arial, sans-serif;
}


/* OVERLAY */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: none;
  justify-content: center;
  align-items: center;
}

.modal {
  background: #121212;
  border: 3px solid #3a3a3a;
  border-radius: 12px;
  padding: 20px;
  width: 640px;
  color: #fff;
  font-family: "BalatroFont", Arial, sans-serif;
}

.modal input,
.modal textarea {
  width: 100%;
  margin-bottom: 10px;
  background: #1a1a1a;
  color: #fff;
  border: 2px solid #3a3a3a;
  font-family: "BalatroFont", Arial, sans-serif;
  font-size: 16pt;
}

#editDesc {
  height: 100px;
  resize: none;
}

.modal button {
  font-family: "BalatroFont", Arial, sans-serif;
  font-size: 16pt;
}

/* CHECKBOX GRID */
.checkbox-grid {
  display: grid;
  grid-template-columns: 250px 250px;
  gap: 6px 20px;
  margin-bottom: 14px;
}

.checkbox-grid label {
  width: 250px;
  display: grid;
  grid-template-columns: auto 1fr;
  column-gap: 0.5ch;
  align-items: center;
  font-size: 14px;
  color: #e0e0e0;
  font-family: "BalatroFont", Arial, sans-serif;
}

.checkbox-grid input {
  margin: 0;
}

/* HORIZONTAL DIVIDER ABOVE BUTTONS */
.modal-divider {
  height: 2px;
  background: #3a3a3a;
  border-radius: 2px;
  margin: 16px 0;
}

.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

input[type="file"] {
  display: none;
}
</style>
</head>

<body>

<div class="app">
  <div class="left-panel">
    <button class="load-btn" id="loadBtn">Load JSON</button>
    <input type="file" id="fileInput" accept=".json" />

    <input class="search" placeholder="Search Textfield" id="search" />
    <div class="listbox" id="listbox"></div>

    <div class="buttons">
      <button id="deleteBtn">DELETE</button>
      <button id="editBtn">EDIT</button>
    </div>
  </div>

  <div class="divider"></div>

  <div class="right-panel">
    <div class="group">
      <div class="label">Name:</div>
      <div class="value" id="nameValue">—</div>
    </div>

    <div class="group">
      <div class="label">Description:</div>
      <div class="value" id="descriptionValue">—</div>
    </div>

    <div class="row">
  <div class="column">
    <div class="label">Platform:</div>
    <div class="value" id="platformValue">—</div>
  </div>

  <div class="column">
    <div class="label">Store:</div>
    <div class="value" id="storeValue">—</div>
  </div>

  <div class="column">
    <div class="label">Release Type:</div>
    <div class="value" id="releaseValue">—</div>
  </div>
</div>

  </div>
</div>

<!-- EDIT OVERLAY -->
<div class="overlay" id="overlay">
  <div class="modal">
    <input id="editName" placeholder="Name" />
    <textarea id="editDesc" placeholder="Description"></textarea>

    <strong>Platforms</strong>
    <div class="checkbox-grid" id="platformChecks"></div>

    <strong>Stores</strong>
    <div class="checkbox-grid" id="storeChecks"></div>

    <!-- NEW HORIZONTAL LINE -->
    <div class="modal-divider"></div>

    <div class="modal-buttons">
      <button id="cancelEdit">Cancel</button>
      <button id="saveEdit">Save</button>
    </div>
  </div>
</div>

<script>
const PLATFORM_ORDER=[
  "PC","PSX","PS2","PS3","PS4","PS5","PSVita",
  "Nintendo Switch","Nintendo Switch 2",
  "XBOX","Xbox 360","Xbox One","Android","iPhone"
];
const STORE_ORDER=[
  "Steam","GOG","Epic Games Store","Itch.IO",
  "Play Store","AppStore","PSN","Microsoft Store", "Nintendo eShop"
];

let games=[],selectedId=null;

loadBtn.onclick=()=>fileInput.click();
fileInput.onchange=()=>{
  const r=new FileReader();
  r.onload=()=>{
    const d=JSON.parse(r.result);
    games=(d.games||[]).map(migrate);
    renderList();
  };
  r.readAsText(fileInput.files[0]);
};

function migrate(g){
  if(typeof g.platform==="string"){
    const o={}; PLATFORM_ORDER.forEach(p=>o[p]=g.platform.includes(p)?1:0); g.platform=o;
  }
  if(typeof g.store==="string"){
    const o={}; STORE_ORDER.forEach(s=>o[s]=g.store===s?1:0); g.store=o;
  }
  return g;
}

function renderList(f=""){
  listbox.innerHTML="";
  games.filter(g=>g.name.toLowerCase().includes(f.toLowerCase()))
    .sort((a,b)=>a.name.localeCompare(b.name))
    .forEach(g=>{
      const d=document.createElement("div");
      d.className="list-item";
      d.textContent=g.name;
      d.onclick=()=>selectGame(g.id,d);
      listbox.appendChild(d);
    });
// Filter the list as you type
  search.oninput = () => {
  renderList(search.value);
};

}

function selectGame(id, el){
  selectedId = id;
  document.querySelectorAll(".list-item").forEach(i => i.classList.remove("active"));
  el.classList.add("active");

  const g = games.find(x => x.id === id);

  nameValue.textContent = g.name;
  descriptionValue.textContent = g.description;

  platformValue.textContent = PLATFORM_ORDER.filter(p => g.platform[p]).join(", ") || "—";
  storeValue.textContent = STORE_ORDER.filter(s => g.store[s]).join(", ") || "—";

  // New: display release types
  releaseValue.textContent = Object.keys(g.release)
    .filter(r => g.release[r])
    .join(", ") || "—";
}


editBtn.onclick=()=>{
  const g=games.find(x=>x.id===selectedId);
  if(!g)return;
  overlay.style.display="flex";
  editName.value=g.name;
  editDesc.value=g.description;
  platformChecks.innerHTML=PLATFORM_ORDER.map(p=>
    `<label><input type="checkbox" data-p="${p}" ${g.platform[p]?"checked":""}><span>${p}</span></label>`
  ).join("");
  storeChecks.innerHTML=STORE_ORDER.map(s=>
    `<label><input type="checkbox" data-s="${s}" ${g.store[s]?"checked":""}><span>${s}</span></label>`
  ).join("");
};

cancelEdit.onclick=()=>overlay.style.display="none";
saveEdit.onclick=()=>{
  const g=games.find(x=>x.id===selectedId);
  g.name=editName.value;
  g.description=editDesc.value;
  PLATFORM_ORDER.forEach(p=>g.platform[p]=document.querySelector(`[data-p="${p}"]`).checked?1:0);
  STORE_ORDER.forEach(s=>g.store[s]=document.querySelector(`[data-s="${s}"]`).checked?1:0);
  overlay.style.display="none";
  renderList(search.value);
};
</script>

</body>
</html>

